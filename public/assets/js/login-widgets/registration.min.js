document.addEventListener("DOMContentLoaded",(function(){var e,t=document.querySelector('[data-sf-role="sf-registration-container"]'),n=t.querySelector('[data-sf-role="form-container"]'),a=n.querySelector("form"),r=t.querySelector('[data-sf-role="error-message-container"]'),i=t.querySelector('[data-sf-role="success-registration-message-container"]'),o=t.querySelector('[data-sf-role="confirm-registration-message-container"]'),l=document.querySelector("[data-sf-visibility-hidden]"),u=l.dataset?l.dataset.sfVisibilityHidden:null,s=document.querySelector("[data-sf-invalid]"),c=s.dataset&&(e=s.dataset.sfInvalid)&&""!==e?s.dataset.sfInvalid:null,d=c?c.split(" "):null,f="data-sf-invalid";a.addEventListener("submit",(function(e){e.preventDefault(),g(a)&&q(a,null,v,m)}));var v=function(){var e=n.querySelector("input[name='PostRegistrationAction']").value,t=n.querySelector("input[name='ActivationMethod']").value;if("ViewMessage"===e)"AfterConfirmation"==t?S():y();else if("RedirectToPage"===e){var a=n.querySelector("input[name='RedirectUrl']").value;T(a)}},m=function(e,t){r.innerText=e,h(r)},y=function(){E(r),E(n),h(i)},S=function(){E(n),h(o);var e=o.querySelector("input[name='ActivationLinkLabel']").value,t=o.querySelector('[data-sf-role="activation-link-message-container"]'),r=new FormData(a).get("Email");t.innerText=e+" "+r;var i=o.querySelector('[data-sf-role="sendAgainLink"]'),l=o.querySelector("input[name='ResendConfirmationEmailUrl']").value;i.addEventListener("click",(function(e){e.preventDefault(),q(a,l,p)}))},q=function(e,t,n,a){t=t||e.attributes.action.value;var r={model:w(e)};window.fetch(t,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((e=>{var t=e.status;0===t||t>=200&&t<400?n&&n():e.json().then((e=>{var n=e.error.message;a&&a(n,t)}))}))},p=function(){var e=o.querySelector('[data-sf-role="activation-link-message-container"]'),t=o.querySelector("input[name='SendAgainLabel']").value,n=new FormData(a).get("Email");e.innerText=t.replace("{0}",n)},g=function(e){var t=!0;if(A(e),E(r),e.querySelectorAll("input[data-sf-role='required']").forEach((function(e){e.value||(L(e),t=!1)})),!t)return r.innerText=n.querySelector("input[name='ValidationRequiredMessage']").value,h(r),t;var a=e.querySelector("input[name='Email']");if(!b(a.value))return r.innerText=n.querySelector("input[name='ValidationInvalidEmailMessage']").value,L(a),h(r),!1;var i=e.querySelectorAll("[type='password']");return i[0].value!==i[1].value?(r.innerText=n.querySelector("input[name='ValidationMismatchMessage']").value,L(i[1]),h(r),!1):t},w=function(e){var t={},n=new FormData(e);for(var a of n.keys())t[a]=n.get(a);return t},L=function(e){e&&(d&&e.classList.add(...d),e.setAttribute(f,""))},A=function(e){e.querySelectorAll("[data-sf-invalid]").forEach((function(e){d&&e.classList.remove(...d),e.removeAttribute(f)}))},h=function(e){e&&(u?e.classList.remove(u):e.style.display="")},E=function(e){e&&(u?e.classList.add(u):e.style.display="none")},b=function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w+)+$/.test(e)},T=function(e){window.location=e}}));