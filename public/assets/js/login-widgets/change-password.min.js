document.addEventListener("DOMContentLoaded",(function(){var e,t=document.querySelector("[data-sf-role='sf-change-password-container']"),a=document.querySelector("[data-sf-visibility-hidden]"),n=a.dataset?a.dataset.sfVisibilityHidden:null,r=document.querySelector("[data-sf-invalid]"),s=r.dataset&&(e=r.dataset.sfInvalid)&&""!==e?r.dataset.sfInvalid:null,i=s?s.split(" "):null,o="data-sf-invalid",u=t.querySelector("form");u.addEventListener("submit",(function(e){if(e.preventDefault(),d(u)){var t={model:c(u)},a=u.attributes.action.value;window.fetch(a,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>{var t=e.status;0===t||t>=200&&t<400?(u.reset(),l()):e.json().then((e=>{var a=e.error.message;if(400==t)var n=u.querySelector("input[name='NewPassword']");else 403==t&&(n=u.querySelector("input[name='OldPassword']"));f(n),p(a,u)}))}))}}));var l=function(){var e=t.querySelector("input[name='postChangeAction']").value;if("ViewAMessage"===e){var a=t.querySelector("input[name='postChangeMessage']").value;y(a,u)}else if("RedirectToPage"===e){var n=t.querySelector("input[name='redirectUrl']").value;m(n)}},c=function(e){var t={},a=new FormData(e);for(var n of a.keys())t[n]=a.get(n);return t},d=function(e){v(e);var a=e.querySelectorAll("input[data-sf-role='required']"),n=!0;if(a.forEach((function(e){e.value||(f(e),n=!1)})),!n){var r=t.querySelector("input[name='validationRequiredMessage']").value;return p(r,e),n}var s=e.querySelector("input[name='NewPassword']"),i=e.querySelector("input[name='RepeatPassword']");return n&&i.value!==s.value&&(f(i),n=!1,r=t.querySelector("input[name='validationMismatchMessage']").value,p(r,e)),n},f=function(e){e&&(i&&e.classList.add(...i),e.setAttribute(o,""))},v=function(e){e.querySelectorAll("[data-sf-invalid]").forEach((function(e){i&&e.classList.remove(...i),e.removeAttribute(o)}))},m=function(e){window.location=e},y=function(e,t){g(t),q(e,t,"[data-sf-role='success-message-container']")},p=function(e,t){S(t),q(e,t,"[data-sf-role='error-message-container']")},q=function(e,t,a){var r=t.querySelector(a);r.innerText=e,n?r.classList.remove(n):r.style.display=""},S=function(e){w(e,"[data-sf-role='success-message-container']")},g=function(e){w(e,"[data-sf-role='error-message-container']")},w=function(e,t){var a=e.querySelector(t);n?a.classList.add(n):a.style.display="none"}}));