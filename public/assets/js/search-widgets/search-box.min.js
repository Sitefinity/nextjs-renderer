!function(){var e,t="data-sf-active",a="data-sfitem",n=document.querySelector("[data-sf-active-class]"),r=n.dataset&&((e=n.dataset.sfActiveClass)&&""!==e)?n.dataset.sfActiveClass:null,s=r?c(r):null,i=document.querySelector("[data-sf-visibility-hidden]"),l=i.dataset?i.dataset.sfVisibilityHidden:null,o=document.querySelector("[data-sf-search-autocomplete-item-class]"),u=o.dataset?o.dataset.sfSearchAutocompleteItemClass:null,d=u?c(u):null;function c(e){return e.split(" ")}function f(e){if(e&&"widgetLoaded"===e.type){var t=e.detail.element.querySelector("[data-sf-role='search-box']"),a=e.detail.element.querySelector("[data-sf-role='search-button'");t&&g(t,a)}else document.querySelectorAll("[data-sf-role='search-box']").forEach((function(e){if(e){var t=e.parentNode.querySelector("[data-sf-role='search-button'");g(e,t)}}))}function g(e,n){!function(e,t){e&&(e.addEventListener("keypress",(function(e){!function(e){e||(e=window.event);13==(e.keyCode||e.charCode)&&o(e.target)}(e)})),e.addEventListener("keyup",(function(e){!function(e){if(38!=e.keyCode&&40!=e.keyCode&&27!=e.keyCode){var t=e.target.value.trim(),a=i(e.target);a.minSuggestionLength&&t.length>=a.minSuggestionLength?function(e){var t=i(e),a=t.servicePath+"/Default.GetSuggestions()?indexName="+t.catalogue+"&sf_culture="+t.culture+"&siteId="+t.siteId+"&scoringInfo="+t.scoringSetting+"&suggestionFields="+t.suggestionFields+"&searchQuery="+e.value;1==t.resultsForAllSites?a+="&resultsForAllSites=True":2==t.resultsForAllSites&&(a+="&resultsForAllSites=False");fetch(a).then((function(e){e.json().then((function(e){r.source(e.value)}))})).catch((function(){r.hide()}))}(e.target):r&&r.hide()}40==e.keyCode?r.focus():27==e.keyCode&&r.hide()}(e)})));t&&t.addEventListener("click",(function(t){o(e)}))}(e,n);var r=function(e){var n=e.parentNode.parentNode.querySelector("[data-sf-role='search-box-autocomplete']"),r=[];function i(){if(n)for(var e=n.lastElementChild;e;)n.removeChild(e),e=n.lastElementChild}function u(t){var a=t.keyCode,r=n.querySelector("[data-sfitem][data-sf-active]");if(r){var s=r.parentElement.previousElementSibling,i=r.parentElement.nextElementSibling;38==a&&s?m(s):40==a&&i?m(i):13==a?(e.value=currentNode.innerText,o(e),v(),e.focus()):27==a&&(c(),v(!1),e.focus())}}function c(){var e=n.querySelector("[data-sf-active]");e&&s&&(e.classList.remove(...s),e.removeAttribute(t))}function f(t){var a=t.target.innerText;e.value=a,o(e),v()}function g(){!function(){const t=e.clientWidth;n&&(n.style.width=t+"px")}(),n&&(l?n.classList.remove(l):n.style.display="")}function v(e){void 0===e&&(e=!0),e&&i(),null!=n&&(n.style.width=""),n&&(l?n?.classList.add(l):null!=n&&(n.style.display="none"))}function h(e){null==n||n.contains(e.relatedTarget)||v(!1)}function m(e){c();var a=e.querySelector("[data-sfitem]");a&&s&&a.classList.add(...s),a.setAttribute(t,""),a.focus()}return e.addEventListener("keyup",(function(e){40==e.keyCode&&r.length&&(g(),m(r[0]))})),e.addEventListener("focusout",h),n?.addEventListener("focusout",h),n?.addEventListener("keyup",u),n?.addEventListener("click",f),{source:function(e){e=Array.isArray(e)?e:[],r=function(e){var t=[];if(Array.isArray(e)&&e.length>0)for(var n=0;n<e.length;n++){var r=document.createElement("LI");r.setAttribute("role","option");var s=document.createElement("BUTTON");s.setAttribute("role","presentation"),d&&s.classList.add(...d),s.setAttribute(a,""),s.innerText=e[n],s.title=e[n],s.tabIndex=-1,r.appendChild(s),t.push(r)}return t}(e),i();for(var t=0;t<r.length;t++)n&&n.appendChild(r[t]);r.length&&g()},show:g,hide:v,clear:i,focus:function(){n&&n.children.length&&n.children[0].querySelector("[data-sfitem]").focus()}}}(e);function i(e){return{resultsUrl:e.getAttribute("data-sf-results-url"),catalogue:e.getAttribute("data-sf-search-catalogue"),scoringSetting:e.getAttribute("data-sf-scoring-setting"),minSuggestionLength:parseInt(e.getAttribute("data-sf-suggestions-length")),siteId:e.getAttribute("data-sf-site-id"),culture:e.getAttribute("data-sf-culture"),suggestionFields:e.getAttribute("data-sf-suggestions-fields"),servicePath:e.getAttribute("data-sf-service-path"),orderBy:e.getAttribute("data-sf-sort"),resultsForAllSites:e.getAttribute("data-sf-results-all")}}function o(e){window.DataIntelligenceSubmitScript&&DataIntelligenceSubmitScript._client.sentenceClient.writeSentence({predicate:"Search for",object:e.value.trim(),objectMetadata:[{K:"PageUrl",V:location.href}]});var t=function(e){var t=e.value.trim(),a=e.getAttribute("data-sf-results-url"),n=(-1===a.indexOf("?")?"?":"&")+"indexCatalogue="+e.getAttribute("data-sf-search-catalogue"),r="&searchQuery="+encodeURIComponent(t),s="&wordsMode=AllWords",i="&sf_culture="+e.getAttribute("data-sf-culture"),l=a+n+r+s+i,o=e.getAttribute("data-sf-scoring-setting");o&&(l=l+"&scoringInfo="+o);var u=e.getAttribute("data-sf-sort");u&&(l=l+"&orderBy="+u);var d=e.getAttribute("data-sf-results-all");1==d?l+="&resultsForAllSites=True":2==d&&(l+="&resultsForAllSites=False");return l}(e);window.location=t}}document.addEventListener("widgetLoaded",f),document.addEventListener("DOMContentLoaded",f)}();
