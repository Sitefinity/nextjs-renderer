!function () { var e, t = "kcChatWindow"; function n(e, n) { var i = "undefined" == typeof TrackingConsentManager || TrackingConsentManager.canTrackCurrentUser(), r = {}; if (i && "" !== (r = a())) { null === (r = JSON.parse(r)).LastName && (r.LastName = ""); var o = e.emptyGuid; if (r.value.Id == o) { var c = e.insightSubject; r.value = { FirstName: "Anonymous", LastName: "Anonymous", Id: c, ProviderType: "Sitefinity Insight" } } e.user = { firstName: r.value.FirstName, lastName: r.value.LastName, id: r.value.Id, providerType: "Sitefinity", hideName: !0 } } var d = "nativechat-launched"; "True" === e.proactive && "inline" !== e.chatMode && ("False" === e.isEdit && (sessionStorage[d] || (n.display.launcher.popupDelayInMs = 3e3, sessionStorage[d] = !0)), e.session.hideUserMessage = !0), "" !== e.bot.avatarUrl && (e.bot.avatarUrl = window.location.origin + e.bot.avatarUrl), window.DataIntelligenceSubmitScript && (e.session.context = { _systemTracking: { insight: { apiKey: window.DataIntelligenceSubmitScript._client.apiKey, dataSource: window.DataIntelligenceSubmitScript._client.source, subject: window.DataIntelligenceSubmitScript._client.sentenceClient.subjectKey, apiServerUrl: window.DataIntelligenceSubmitScript._client.apiServerUrl, canTrackCurrentUser: i } } }), window.NativeChat.load(n); var s = document.getElementById(`nativechat-launcher-${t}`); if (s) { var l = document.getElementById("nativechat-container"); s.remove(), l.appendChild(s) } } function a() { var t = window.location.origin + "/" + e.webServicePath + "/currentuser", n = new XMLHttpRequest; return n.open("GET", t, !1), n.setRequestHeader("Content-Type", "application/json"), n.send(), n.response } document.addEventListener("DOMContentLoaded", (function () { var a = document.getElementById("native-chat-data"); if (a) { e = JSON.parse(a.textContent); var i = { id: t, origin: "", display: { mode: e.chatMode, launcher: { openIconUrl: e.openIconUrl, closeIconUrl: e.closeIconUrl }, containerId: e.containerId }, chat: e }; window.DataIntelligenceSubmitScript ? n(e, i) : document.getElementById("sf-insight-settings") ? window.addEventListener ? window.addEventListener("decclientready", n.bind(this, e, i), !1) : window.attachEvent && window.attachEvent("decclientready", n.bind(this, e, i)) : n(e, i) } })) }();